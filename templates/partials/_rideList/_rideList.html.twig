<div class="my-5 container">
<hr class="hr-blurry">

    <h2 class="text-center fw-bold mb-5">
        Trouvez facilement votre prochain covoiturage. Voyagez malin, économique...
    </h2>

    <div class="row g-4">
      

{% for ride in couvoiturages %}
  {% set s = ride.statut|default('PLANNED') %}
  {% set badgeClass =
    s == 'PUBLISHED' ? 'bg-success' :
    (s == 'FULL' ? 'bg-warning text-dark' :
    (s == 'CANCELLED' ? 'bg-danger' :
    (s == 'PLANNED' ? 'bg-secondary' : 'bg-info'))) %}

  <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
    <div class="card h-100 shadow-sm border-0 card-hover position-relative">
      <div class="card-body d-flex flex-column">
        <div class="d-flex justify-content-between align-items-start mb-2">
          <h5 class="fw-bold mb-0 text-truncate">
            <i class="bi bi-geo-alt me-1"></i>
            {{ ride.lieuDepart }} <i class="bi bi-arrow-right mx-1"></i> {{ ride.lieuArrivee }}
          </h5>
          <span class="badge {{ badgeClass }} ms-2">{{ s }}</span>
        </div>

        <p class="text-muted small mb-1">
          <i class="bi bi-calendar2 me-1"></i>
          {{ ride.departAt|date('d/m/Y \\à H:i') }}
        </p>

        <p class="fw-bold text-primary mb-2">
          <i class="bi bi-cash-coin me-1"></i>
          {{ ride.prixPersonne|number_format(2, ',', ' ') }} €
        </p>

        <div class="mt-auto pt-2 small text-muted">
          <div class="d-flex align-items-center">
            <i class="bi bi-person me-1"></i>
            <span class="fw-semibold">{{ ride.driver.prenom ~ ' ' ~ ride.driver.nom }}</span>
          </div>
          {% if ride.voiture is defined and ride.voiture %}
            <div class="d-flex align-items-center mt-1">
              <i class="bi bi-car-front me-1"></i>
              <span>{{ ride.voiture.marque.nom }} {{ ride.voiture.modele }}</span>
            </div>
          {% endif %}
        </div>

        {# Lien vers le détail du trajet #}
        <a href="{{ path('app_couvoiturage_show', {'id': ride.id}) }}" class="stretched-link" aria-label="Voir le trajet"></a>
      </div>
    </div>
  </div>
{% endfor %}

    </div>

   
</div>
